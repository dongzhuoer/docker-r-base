language: generic
services: docker

script:
  - docker build -t dongzhuoer/rlang:base .

  - echo "$DOCKER_PASSWORD" | docker login -u dongzhuoer --password-stdin
  - docker push dongzhuoer/rlang:base
after_success:
  - body='{ "request":{"branch":"devtools", "message":"dongzhuoer/rlang:base updated"} }'
  - curl -s -X POST -H "Content-Type:application/json" -H "Accept:application/json" -H "Travis-API-Version:3" -H "Authorization:token $TRAVIS_TOKEN" -d "$body" https://api.travis-ci.com/repo/dongzhuoer%2Fdocker-rlang/requests

notifications:
  email: false
